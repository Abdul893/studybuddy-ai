# AWS App Runner Configuration
version: 1.0

runtime: nodejs18
build:
  commands:
    build:
      - echo "Installing dependencies..."
      - cd client && npm install
      - cd client && npm run build
      - cd ../server && npm install
run:
  runtime-version: nodejs18
  command: cd server && npm start
  environment:
    - name: NODE_ENV
      value: production
    - name: PORT
      value: 8080
    - name: MONGODB_URI
      value: "mongodb+srv://placeholder:placeholder@cluster.mongodb.net/studybuddy-ai"
    - name: MONGODB_DB
      value: studybuddy-ai
    - name: JWT_SECRET
      value: "your-production-jwt-secret-change-this"
    - name: GEMINI_API_KEY
      value: "your-gemini-api-key"
    - name: GEMINI_MODEL
      value: "gemini-1.5-flash"
    - name: FIREBASE_SERVICE_ACCOUNT
      value: '{"type":"service_account","project_id":"..."}'
